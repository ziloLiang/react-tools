{"version":3,"sources":["node_modules/remarkable/lib/rules_block/footnote.js"],"names":["module","exports","footnote","state","startLine","endLine","silent","oldBMark","oldTShift","oldParentType","pos","label","start","bMarks","tShift","max","eMarks","src","charCodeAt","level","options","maxNesting","env","footnotes","refs","slice","tokens","push","type","parentType","skipSpaces","blkIndent","parser","tokenize"],"mappings":"AAAA;;AAEA;;AAGAA,OAAOC,OAAP,GAAiB,SAASC,QAAT,CAAkBC,KAAlB,EAAyBC,SAAzB,EAAoCC,OAApC,EAA6CC,MAA7C,EAAqD;AACpE,MAAIC,QAAJ;AAAA,MAAcC,SAAd;AAAA,MAAyBC,aAAzB;AAAA,MAAwCC,GAAxC;AAAA,MAA6CC,KAA7C;AAAA,MACIC,QAAQT,MAAMU,MAAN,CAAaT,SAAb,IAA0BD,MAAMW,MAAN,CAAaV,SAAb,CADtC;AAAA,MAEIW,MAAMZ,MAAMa,MAAN,CAAaZ,SAAb,CAFV;;AAIA;AACA,MAAIQ,QAAQ,CAAR,GAAYG,GAAhB,EAAqB;AAAE,WAAO,KAAP;AAAe;;AAEtC,MAAIZ,MAAMc,GAAN,CAAUC,UAAV,CAAqBN,KAArB,MAAgC,IAApC,CAAwC,OAAxC,EAAiD;AAAE,aAAO,KAAP;AAAe;AAClE,MAAIT,MAAMc,GAAN,CAAUC,UAAV,CAAqBN,QAAQ,CAA7B,MAAoC,IAAxC,CAA4C,OAA5C,EAAqD;AAAE,aAAO,KAAP;AAAe;AACtE,MAAIT,MAAMgB,KAAN,IAAehB,MAAMiB,OAAN,CAAcC,UAAjC,EAA6C;AAAE,WAAO,KAAP;AAAe;;AAE9D,OAAKX,MAAME,QAAQ,CAAnB,EAAsBF,MAAMK,GAA5B,EAAiCL,KAAjC,EAAwC;AACtC,QAAIP,MAAMc,GAAN,CAAUC,UAAV,CAAqBR,GAArB,MAA8B,IAAlC,EAAwC;AAAE,aAAO,KAAP;AAAe;AACzD,QAAIP,MAAMc,GAAN,CAAUC,UAAV,CAAqBR,GAArB,MAA8B,IAAlC,CAAuC,OAAvC,EAAgD;AAC9C;AACD;AACF;;AAED,MAAIA,QAAQE,QAAQ,CAApB,EAAuB;AAAE,WAAO,KAAP;AAAe,GAnB4B,CAmB3B;AACzC,MAAIF,MAAM,CAAN,IAAWK,GAAX,IAAkBZ,MAAMc,GAAN,CAAUC,UAAV,CAAqB,EAAER,GAAvB,MAAgC,IAAtD,CAA2D,OAA3D,EAAoE;AAAE,aAAO,KAAP;AAAe;AACrF,MAAIJ,MAAJ,EAAY;AAAE,WAAO,IAAP;AAAc;AAC5BI;;AAEA,MAAI,CAACP,MAAMmB,GAAN,CAAUC,SAAf,EAA0B;AAAEpB,UAAMmB,GAAN,CAAUC,SAAV,GAAsB,EAAtB;AAA2B;AACvD,MAAI,CAACpB,MAAMmB,GAAN,CAAUC,SAAV,CAAoBC,IAAzB,EAA+B;AAAErB,UAAMmB,GAAN,CAAUC,SAAV,CAAoBC,IAApB,GAA2B,EAA3B;AAAgC;AACjEb,UAAQR,MAAMc,GAAN,CAAUQ,KAAV,CAAgBb,QAAQ,CAAxB,EAA2BF,MAAM,CAAjC,CAAR;AACAP,QAAMmB,GAAN,CAAUC,SAAV,CAAoBC,IAApB,CAAyB,MAAMb,KAA/B,IAAwC,CAAC,CAAzC;;AAEAR,QAAMuB,MAAN,CAAaC,IAAb,CAAkB;AAChBC,UAAM,yBADU;AAEhBjB,WAAOA,KAFS;AAGhBQ,WAAOhB,MAAMgB,KAAN;AAHS,GAAlB;;AAMAZ,aAAWJ,MAAMU,MAAN,CAAaT,SAAb,CAAX;AACAI,cAAYL,MAAMW,MAAN,CAAaV,SAAb,CAAZ;AACAK,kBAAgBN,MAAM0B,UAAtB;AACA1B,QAAMW,MAAN,CAAaV,SAAb,IAA0BD,MAAM2B,UAAN,CAAiBpB,GAAjB,IAAwBA,GAAlD;AACAP,QAAMU,MAAN,CAAaT,SAAb,IAA0BM,GAA1B;AACAP,QAAM4B,SAAN,IAAmB,CAAnB;AACA5B,QAAM0B,UAAN,GAAmB,UAAnB;;AAEA,MAAI1B,MAAMW,MAAN,CAAaV,SAAb,IAA0BD,MAAM4B,SAApC,EAA+C;AAC7C5B,UAAMW,MAAN,CAAaV,SAAb,KAA2BD,MAAM4B,SAAjC;AACA5B,UAAMU,MAAN,CAAaT,SAAb,KAA2BD,MAAM4B,SAAjC;AACD;;AAED5B,QAAM6B,MAAN,CAAaC,QAAb,CAAsB9B,KAAtB,EAA6BC,SAA7B,EAAwCC,OAAxC,EAAiD,IAAjD;;AAEAF,QAAM0B,UAAN,GAAmBpB,aAAnB;AACAN,QAAM4B,SAAN,IAAmB,CAAnB;AACA5B,QAAMW,MAAN,CAAaV,SAAb,IAA0BI,SAA1B;AACAL,QAAMU,MAAN,CAAaT,SAAb,IAA0BG,QAA1B;;AAEAJ,QAAMuB,MAAN,CAAaC,IAAb,CAAkB;AAChBC,UAAM,0BADU;AAEhBT,WAAO,EAAEhB,MAAMgB;AAFC,GAAlB;;AAKA,SAAO,IAAP;AACD,CA7DD","file":"footnote.js","sourceRoot":"/Users/liangdong06/work/react-tools","sourcesContent":["// Process footnote reference list\n\n'use strict';\n\n\nmodule.exports = function footnote(state, startLine, endLine, silent) {\n  var oldBMark, oldTShift, oldParentType, pos, label,\n      start = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // line should be at least 5 chars - \"[^x]:\"\n  if (start + 4 > max) { return false; }\n\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos + 1 >= max || state.src.charCodeAt(++pos) !== 0x3A /* : */) { return false; }\n  if (silent) { return true; }\n  pos++;\n\n  if (!state.env.footnotes) { state.env.footnotes = {}; }\n  if (!state.env.footnotes.refs) { state.env.footnotes.refs = {}; }\n  label = state.src.slice(start + 2, pos - 2);\n  state.env.footnotes.refs[':' + label] = -1;\n\n  state.tokens.push({\n    type: 'footnote_reference_open',\n    label: label,\n    level: state.level++\n  });\n\n  oldBMark = state.bMarks[startLine];\n  oldTShift = state.tShift[startLine];\n  oldParentType = state.parentType;\n  state.tShift[startLine] = state.skipSpaces(pos) - pos;\n  state.bMarks[startLine] = pos;\n  state.blkIndent += 4;\n  state.parentType = 'footnote';\n\n  if (state.tShift[startLine] < state.blkIndent) {\n    state.tShift[startLine] += state.blkIndent;\n    state.bMarks[startLine] -= state.blkIndent;\n  }\n\n  state.parser.tokenize(state, startLine, endLine, true);\n\n  state.parentType = oldParentType;\n  state.blkIndent -= 4;\n  state.tShift[startLine] = oldTShift;\n  state.bMarks[startLine] = oldBMark;\n\n  state.tokens.push({\n    type: 'footnote_reference_close',\n    level: --state.level\n  });\n\n  return true;\n};\n"]}