{"version":3,"sources":["tools/Tooltips/index.js"],"names":["Tooltips","props","container","removeFromBody","unstable_renderSubtreeIntoContainer","overlay","body","undefined","timer","setTimeout","document","createElement","appendChild","insertContainer","timeout","clearTimeout","unmountComponentAtNode","removeChild","e","appendToBody","trigger","onMouseEnter","bind","onMouseMove","onMouseLeave","triggerProps","generateProps","children","Component","defaultProps","placement","className","spacing","Position","state","position","left","top","updatePosition","setState","caculatePosition","target","$target","findDOMNode","$tooltip","targetBox","offset","tooltipBox","pos","tooltipW","width","tooltipH","height","Object","assign","styles"],"mappings":"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","file":"index.js","sourceRoot":"/Users/liangdong06/work/react-tools","sourcesContent":["/**\n * @file tooltip Component\n * 配置params: body[要显示的文字] spacing[间距 默认 0] trigger: [触发事件 默认 hover]\n * @description RT\n * @author liangdong06\n */\n\n'use strict';\n\nimport React, {cloneElement} from 'react';\nimport ReactDOM from 'react-dom';\nimport domHelper, {query} from 'dom-helpers';\n\nimport './tootips.less';\n\nexport default class Tooltips extends React.Component {\n\n    static defaultProps = {\n        trigger: 'hover',\n        placement: 'bottom',\n        timeout: 300,\n        className: '',\n        spacing: 3\n    }\n\n    constructor(props) {\n        super(props);\n        this.container = null;\n    }\n\n    componentWillUnmount() {\n        this.removeFromBody();\n    }\n    insertContainer() {\n        ReactDOM.unstable_renderSubtreeIntoContainer(\n            this,\n            this.overlay,\n            this.container\n        );\n    }\n\n    appendToBody() {\n        if (!this.container && this.props.body !== undefined) {\n            this.timer = setTimeout(() => {\n                this.container = document.createElement('div');\n                document.body.appendChild(this.container);\n                this.insertContainer();\n            }, this.props.timeout);\n        }\n    }\n\n    removeFromBody() {\n        clearTimeout(this.timer);\n        this.timer = null;\n        if (this.container) {\n            ReactDOM.unmountComponentAtNode(this.container);\n            document.body.removeChild(this.container);\n            this.container = null;\n        }\n    }\n\n    onMouseEnter(e) {\n        if (!this.timer && !this.container) {\n            this.appendToBody();\n        }\n    }\n\n    onMouseMove(e) {\n        if (!this.timer && !this.container) {\n            this.appendToBody();\n        }\n    }\n\n    onMouseLeave(e) {\n        this.removeFromBody();\n    }\n    generateProps() {\n        switch (this.props.trigger) {\n            case 'hover':\n                return {\n                    onMouseEnter: this.onMouseEnter.bind(this),\n                    onMouseMove: this.onMouseMove.bind(this),\n                    onMouseLeave: this.onMouseLeave.bind(this)\n                };\n            default:\n                // statements_def\n                break;\n        }\n    }\n    render() {\n        const triggerProps = this.generateProps();\n\n        this.overlay = <Position\n            target={this}\n            container={this.container}\n            {...this.props}\n        >{this.props.body}</Position>;\n\n        return cloneElement(this.props.children, triggerProps);\n    }\n}\n\nclass Position extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            position: {\n                left: 0,\n                top: 0\n            }\n        };\n    }\n\n    componentDidMount() {\n        this.updatePosition();\n    }\n\n    updatePosition() {\n        // console.log(this.caculatePosition())\n        this.setState({\n            position: this.caculatePosition()\n        });\n    }\n\n    caculatePosition() {\n        const {target, placement, spacing} = this.props;\n        const $target = ReactDOM.findDOMNode(target);\n        const $tooltip = ReactDOM.findDOMNode(this);\n        const targetBox = query.offset($target);\n        const tooltipBox = query.offset($tooltip);\n        let pos = {\n            tooltipW: tooltipBox.width,\n            tooltipH: tooltipBox.height\n        };\n        switch (placement) {\n            // case 'right':\n            //     Object.assign(pos, {\n            //         positionLeft: targetBox.left + targetBox.width,\n            //         positionTop: targetBox.top\n            //     });\n            //     break;\n            // case 'left':\n            //     Object.assign(pos, {\n            //         left: targetBox.left + spacing,\n            //         top: targetBox.top - tooltipBox.height\n            //     });\n            //     break;\n            // case 'top':\n            //     Object.assign(pos, {\n            //         left: targetBox.left + (targetBox.width - tooltipBox.width) / 2,\n            //         top: targetBox.top - tooltipBox.height\n            //     });\n            //     break;\n            case 'bottom':\n                Object.assign(pos, {\n                    left: targetBox.left,\n                    top: targetBox.top + targetBox.height + spacing\n                });\n                break;\n            case 'bottom right':\n                Object.assign(pos, {\n                    left: targetBox.left + targetBox.width - tooltipBox.width,\n                    top: targetBox.top + targetBox.height + spacing\n                });\n                break;\n            default:\n                // statements_def\n                break;\n        }\n        return pos;\n    }\n\n    render() {\n\n        const styles = {\n            left: this.state.position.left,\n            top: this.state.position.top\n        };\n        const className = 'tooltip ' + this.props.className;\n\n        return <div className={className} style={styles}>\n            {this.props.children}\n        </div>;\n    }\n\n}\n"]}