{"version":3,"sources":["node_modules/remarkable/lib/helpers/parse_link_destination.js"],"names":["normalizeLink","require","unescapeMd","module","exports","parseLinkDestination","state","pos","code","level","link","start","max","posMax","src","charCodeAt","slice","parser","validateLink","linkContent"],"mappings":"AAAA;;AAGA,IAAIA,gBAAgBC,QAAQ,kBAAR,CAApB;AACA,IAAIC,aAAgBD,QAAQ,iBAAR,EAA2BC,UAA/C;;AAEA;;;;;;;;;;;AAWAC,OAAOC,OAAP,GAAiB,SAASC,oBAAT,CAA8BC,KAA9B,EAAqCC,GAArC,EAA0C;AACzD,MAAIC,IAAJ;AAAA,MAAUC,KAAV;AAAA,MAAiBC,IAAjB;AAAA,MACIC,QAAQJ,GADZ;AAAA,MAEIK,MAAMN,MAAMO,MAFhB;;AAIA,MAAIP,MAAMQ,GAAN,CAAUC,UAAV,CAAqBR,GAArB,MAA8B,IAAlC,CAAuC,OAAvC,EAAgD;AAC9CA;AACA,aAAOA,MAAMK,GAAb,EAAkB;AAChBJ,eAAOF,MAAMQ,GAAN,CAAUC,UAAV,CAAqBR,GAArB,CAAP;AACA,YAAIC,SAAS,IAAb,CAAkB,QAAlB,EAA4B;AAAE,mBAAO,KAAP;AAAe;AAC7C,YAAIA,SAAS,IAAb,CAAkB,OAAlB,EAA2B;AACzBE,mBAAOV,cAAcE,WAAWI,MAAMQ,GAAN,CAAUE,KAAV,CAAgBL,QAAQ,CAAxB,EAA2BJ,GAA3B,CAAX,CAAd,CAAP;AACA,gBAAI,CAACD,MAAMW,MAAN,CAAaC,YAAb,CAA0BR,IAA1B,CAAL,EAAsC;AAAE,qBAAO,KAAP;AAAe;AACvDJ,kBAAMC,GAAN,GAAYA,MAAM,CAAlB;AACAD,kBAAMa,WAAN,GAAoBT,IAApB;AACA,mBAAO,IAAP;AACD;AACD,YAAIF,SAAS,IAAT,CAAc,OAAd,IAAyBD,MAAM,CAAN,GAAUK,GAAvC,EAA4C;AAC1CL,iBAAO,CAAP;AACA;AACD;;AAEDA;AACD;;AAED;AACA,aAAO,KAAP;AACD;;AAED;;AAEAE,UAAQ,CAAR;AACA,SAAOF,MAAMK,GAAb,EAAkB;AAChBJ,WAAOF,MAAMQ,GAAN,CAAUC,UAAV,CAAqBR,GAArB,CAAP;;AAEA,QAAIC,SAAS,IAAb,EAAmB;AAAE;AAAQ;;AAE7B,QAAIA,OAAO,IAAP,IAAeA,OAAO,IAA1B,EAAgC;AAAE;AAAQ;;AAE1C,QAAIA,SAAS,IAAT,CAAc,OAAd,IAAyBD,MAAM,CAAN,GAAUK,GAAvC,EAA4C;AAC1CL,aAAO,CAAP;AACA;AACD;;AAED,QAAIC,SAAS,IAAb,CAAkB,OAAlB,EAA2B;AACzBC;AACA,YAAIA,QAAQ,CAAZ,EAAe;AAAE;AAAQ;AAC1B;;AAED,QAAID,SAAS,IAAb,CAAkB,OAAlB,EAA2B;AACzBC;AACA,YAAIA,QAAQ,CAAZ,EAAe;AAAE;AAAQ;AAC1B;;AAEDF;AACD;;AAED,MAAII,UAAUJ,GAAd,EAAmB;AAAE,WAAO,KAAP;AAAe;;AAEpCG,SAAOR,WAAWI,MAAMQ,GAAN,CAAUE,KAAV,CAAgBL,KAAhB,EAAuBJ,GAAvB,CAAX,CAAP;AACA,MAAI,CAACD,MAAMW,MAAN,CAAaC,YAAb,CAA0BR,IAA1B,CAAL,EAAsC;AAAE,WAAO,KAAP;AAAe;;AAEvDJ,QAAMa,WAAN,GAAoBT,IAApB;AACAJ,QAAMC,GAAN,GAAYA,GAAZ;AACA,SAAO,IAAP;AACD,CAjED","file":"parse_link_destination.js","sourceRoot":"/Users/liangdong06/work/react-tools","sourcesContent":["'use strict';\n\n\nvar normalizeLink = require('./normalize_link');\nvar unescapeMd    = require('../common/utils').unescapeMd;\n\n/**\n * Parse link destination\n *\n *   - on success it returns a string and updates state.pos;\n *   - on failure it returns null\n *\n * @param  {Object} state\n * @param  {Number} pos\n * @api private\n */\n\nmodule.exports = function parseLinkDestination(state, pos) {\n  var code, level, link,\n      start = pos,\n      max = state.posMax;\n\n  if (state.src.charCodeAt(pos) === 0x3C /* < */) {\n    pos++;\n    while (pos < max) {\n      code = state.src.charCodeAt(pos);\n      if (code === 0x0A /* \\n */) { return false; }\n      if (code === 0x3E /* > */) {\n        link = normalizeLink(unescapeMd(state.src.slice(start + 1, pos)));\n        if (!state.parser.validateLink(link)) { return false; }\n        state.pos = pos + 1;\n        state.linkContent = link;\n        return true;\n      }\n      if (code === 0x5C /* \\ */ && pos + 1 < max) {\n        pos += 2;\n        continue;\n      }\n\n      pos++;\n    }\n\n    // no closing '>'\n    return false;\n  }\n\n  // this should be ... } else { ... branch\n\n  level = 0;\n  while (pos < max) {\n    code = state.src.charCodeAt(pos);\n\n    if (code === 0x20) { break; }\n\n    if (code > 0x08 && code < 0x0e) { break; }\n\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    if (code === 0x28 /* ( */) {\n      level++;\n      if (level > 1) { break; }\n    }\n\n    if (code === 0x29 /* ) */) {\n      level--;\n      if (level < 0) { break; }\n    }\n\n    pos++;\n  }\n\n  if (start === pos) { return false; }\n\n  link = unescapeMd(state.src.slice(start, pos));\n  if (!state.parser.validateLink(link)) { return false; }\n\n  state.linkContent = link;\n  state.pos = pos;\n  return true;\n};\n"]}