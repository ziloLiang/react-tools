{"version":3,"sources":["node_modules/react/lib/EventPluginUtils.js"],"names":["_prodInvariant","require","EventConstants","ReactErrorUtils","invariant","warning","ComponentTree","TreeTraversal","injection","injectComponentTree","Injected","process","env","NODE_ENV","getNodeFromInstance","getInstanceFromNode","injectTreeTraversal","isAncestor","getLowestCommonAncestor","topLevelTypes","isEndish","topLevelType","topMouseUp","topTouchEnd","topTouchCancel","isMoveish","topMouseMove","topTouchMove","isStartish","topMouseDown","topTouchStart","validateEventDispatches","event","dispatchListeners","_dispatchListeners","dispatchInstances","_dispatchInstances","listenersIsArr","Array","isArray","listenersLen","length","instancesIsArr","instancesLen","executeDispatch","simulated","listener","inst","type","currentTarget","EventPluginUtils","invokeGuardedCallbackWithCatch","invokeGuardedCallback","executeDispatchesInOrder","i","isPropagationStopped","executeDispatchesInOrderStopAtTrueImpl","executeDispatchesInOrderStopAtTrue","ret","executeDirectDispatch","dispatchListener","dispatchInstance","res","hasDispatches","node","a","b","getParentInstance","traverseTwoPhase","target","fn","arg","traverseEnterLeave","from","to","argFrom","argTo","module","exports"],"mappings":"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","file":"EventPluginUtils.js","sourceRoot":"/Users/liangdong06/work/react-tools","sourcesContent":["/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule EventPluginUtils\n */\n\n'use strict';\n\nvar _prodInvariant = require('./reactProdInvariant');\n\nvar EventConstants = require('./EventConstants');\nvar ReactErrorUtils = require('./ReactErrorUtils');\n\nvar invariant = require('fbjs/lib/invariant');\nvar warning = require('fbjs/lib/warning');\n\n/**\n * Injected dependencies:\n */\n\n/**\n * - `ComponentTree`: [required] Module that can convert between React instances\n *   and actual node references.\n */\nvar ComponentTree;\nvar TreeTraversal;\nvar injection = {\n  injectComponentTree: function (Injected) {\n    ComponentTree = Injected;\n    if (process.env.NODE_ENV !== 'production') {\n      process.env.NODE_ENV !== 'production' ? warning(Injected && Injected.getNodeFromInstance && Injected.getInstanceFromNode, 'EventPluginUtils.injection.injectComponentTree(...): Injected ' + 'module is missing getNodeFromInstance or getInstanceFromNode.') : void 0;\n    }\n  },\n  injectTreeTraversal: function (Injected) {\n    TreeTraversal = Injected;\n    if (process.env.NODE_ENV !== 'production') {\n      process.env.NODE_ENV !== 'production' ? warning(Injected && Injected.isAncestor && Injected.getLowestCommonAncestor, 'EventPluginUtils.injection.injectTreeTraversal(...): Injected ' + 'module is missing isAncestor or getLowestCommonAncestor.') : void 0;\n    }\n  }\n};\n\nvar topLevelTypes = EventConstants.topLevelTypes;\n\nfunction isEndish(topLevelType) {\n  return topLevelType === topLevelTypes.topMouseUp || topLevelType === topLevelTypes.topTouchEnd || topLevelType === topLevelTypes.topTouchCancel;\n}\n\nfunction isMoveish(topLevelType) {\n  return topLevelType === topLevelTypes.topMouseMove || topLevelType === topLevelTypes.topTouchMove;\n}\nfunction isStartish(topLevelType) {\n  return topLevelType === topLevelTypes.topMouseDown || topLevelType === topLevelTypes.topTouchStart;\n}\n\nvar validateEventDispatches;\nif (process.env.NODE_ENV !== 'production') {\n  validateEventDispatches = function (event) {\n    var dispatchListeners = event._dispatchListeners;\n    var dispatchInstances = event._dispatchInstances;\n\n    var listenersIsArr = Array.isArray(dispatchListeners);\n    var listenersLen = listenersIsArr ? dispatchListeners.length : dispatchListeners ? 1 : 0;\n\n    var instancesIsArr = Array.isArray(dispatchInstances);\n    var instancesLen = instancesIsArr ? dispatchInstances.length : dispatchInstances ? 1 : 0;\n\n    process.env.NODE_ENV !== 'production' ? warning(instancesIsArr === listenersIsArr && instancesLen === listenersLen, 'EventPluginUtils: Invalid `event`.') : void 0;\n  };\n}\n\n/**\n * Dispatch the event to the listener.\n * @param {SyntheticEvent} event SyntheticEvent to handle\n * @param {boolean} simulated If the event is simulated (changes exn behavior)\n * @param {function} listener Application-level callback\n * @param {*} inst Internal component instance\n */\nfunction executeDispatch(event, simulated, listener, inst) {\n  var type = event.type || 'unknown-event';\n  event.currentTarget = EventPluginUtils.getNodeFromInstance(inst);\n  if (simulated) {\n    ReactErrorUtils.invokeGuardedCallbackWithCatch(type, listener, event);\n  } else {\n    ReactErrorUtils.invokeGuardedCallback(type, listener, event);\n  }\n  event.currentTarget = null;\n}\n\n/**\n * Standard/simple iteration through an event's collected dispatches.\n */\nfunction executeDispatchesInOrder(event, simulated) {\n  var dispatchListeners = event._dispatchListeners;\n  var dispatchInstances = event._dispatchInstances;\n  if (process.env.NODE_ENV !== 'production') {\n    validateEventDispatches(event);\n  }\n  if (Array.isArray(dispatchListeners)) {\n    for (var i = 0; i < dispatchListeners.length; i++) {\n      if (event.isPropagationStopped()) {\n        break;\n      }\n      // Listeners and Instances are two parallel arrays that are always in sync.\n      executeDispatch(event, simulated, dispatchListeners[i], dispatchInstances[i]);\n    }\n  } else if (dispatchListeners) {\n    executeDispatch(event, simulated, dispatchListeners, dispatchInstances);\n  }\n  event._dispatchListeners = null;\n  event._dispatchInstances = null;\n}\n\n/**\n * Standard/simple iteration through an event's collected dispatches, but stops\n * at the first dispatch execution returning true, and returns that id.\n *\n * @return {?string} id of the first dispatch execution who's listener returns\n * true, or null if no listener returned true.\n */\nfunction executeDispatchesInOrderStopAtTrueImpl(event) {\n  var dispatchListeners = event._dispatchListeners;\n  var dispatchInstances = event._dispatchInstances;\n  if (process.env.NODE_ENV !== 'production') {\n    validateEventDispatches(event);\n  }\n  if (Array.isArray(dispatchListeners)) {\n    for (var i = 0; i < dispatchListeners.length; i++) {\n      if (event.isPropagationStopped()) {\n        break;\n      }\n      // Listeners and Instances are two parallel arrays that are always in sync.\n      if (dispatchListeners[i](event, dispatchInstances[i])) {\n        return dispatchInstances[i];\n      }\n    }\n  } else if (dispatchListeners) {\n    if (dispatchListeners(event, dispatchInstances)) {\n      return dispatchInstances;\n    }\n  }\n  return null;\n}\n\n/**\n * @see executeDispatchesInOrderStopAtTrueImpl\n */\nfunction executeDispatchesInOrderStopAtTrue(event) {\n  var ret = executeDispatchesInOrderStopAtTrueImpl(event);\n  event._dispatchInstances = null;\n  event._dispatchListeners = null;\n  return ret;\n}\n\n/**\n * Execution of a \"direct\" dispatch - there must be at most one dispatch\n * accumulated on the event or it is considered an error. It doesn't really make\n * sense for an event with multiple dispatches (bubbled) to keep track of the\n * return values at each dispatch execution, but it does tend to make sense when\n * dealing with \"direct\" dispatches.\n *\n * @return {*} The return value of executing the single dispatch.\n */\nfunction executeDirectDispatch(event) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateEventDispatches(event);\n  }\n  var dispatchListener = event._dispatchListeners;\n  var dispatchInstance = event._dispatchInstances;\n  !!Array.isArray(dispatchListener) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'executeDirectDispatch(...): Invalid `event`.') : _prodInvariant('103') : void 0;\n  event.currentTarget = dispatchListener ? EventPluginUtils.getNodeFromInstance(dispatchInstance) : null;\n  var res = dispatchListener ? dispatchListener(event) : null;\n  event.currentTarget = null;\n  event._dispatchListeners = null;\n  event._dispatchInstances = null;\n  return res;\n}\n\n/**\n * @param {SyntheticEvent} event\n * @return {boolean} True iff number of dispatches accumulated is greater than 0.\n */\nfunction hasDispatches(event) {\n  return !!event._dispatchListeners;\n}\n\n/**\n * General utilities that are useful in creating custom Event Plugins.\n */\nvar EventPluginUtils = {\n  isEndish: isEndish,\n  isMoveish: isMoveish,\n  isStartish: isStartish,\n\n  executeDirectDispatch: executeDirectDispatch,\n  executeDispatchesInOrder: executeDispatchesInOrder,\n  executeDispatchesInOrderStopAtTrue: executeDispatchesInOrderStopAtTrue,\n  hasDispatches: hasDispatches,\n\n  getInstanceFromNode: function (node) {\n    return ComponentTree.getInstanceFromNode(node);\n  },\n  getNodeFromInstance: function (node) {\n    return ComponentTree.getNodeFromInstance(node);\n  },\n  isAncestor: function (a, b) {\n    return TreeTraversal.isAncestor(a, b);\n  },\n  getLowestCommonAncestor: function (a, b) {\n    return TreeTraversal.getLowestCommonAncestor(a, b);\n  },\n  getParentInstance: function (inst) {\n    return TreeTraversal.getParentInstance(inst);\n  },\n  traverseTwoPhase: function (target, fn, arg) {\n    return TreeTraversal.traverseTwoPhase(target, fn, arg);\n  },\n  traverseEnterLeave: function (from, to, fn, argFrom, argTo) {\n    return TreeTraversal.traverseEnterLeave(from, to, fn, argFrom, argTo);\n  },\n\n  injection: injection\n};\n\nmodule.exports = EventPluginUtils;"]}