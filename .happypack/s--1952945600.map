{"version":3,"sources":["node_modules/superagent/lib/client.js"],"names":["root","window","self","console","warn","Emitter","require","requestBase","isObject","noop","request","module","exports","bind","Request","getXHR","XMLHttpRequest","location","protocol","ActiveXObject","e","Error","trim","s","replace","serialize","obj","pairs","key","pushEncodedKeyValuePair","join","val","Array","isArray","forEach","v","subkey","push","encodeURIComponent","serializeObject","parseString","str","split","pair","pos","i","len","length","indexOf","decodeURIComponent","slice","types","html","json","xml","urlencoded","JSON","stringify","parse","parseHeader","lines","fields","index","line","field","pop","toLowerCase","isJSON","mime","test","type","shift","params","reduce","parts","Response","req","options","xhr","text","method","responseType","responseText","statusText","_setStatusProperties","status","header","headers","getAllResponseHeaders","getResponseHeader","_setHeaderProperties","body","_parseBody","response","prototype","get","ct","Object","statusCode","statusType","info","ok","clientError","serverError","error","toError","accepted","noContent","badRequest","unauthorized","notAcceptable","notFound","forbidden","url","msg","err","_query","_header","on","res","original","rawResponse","callback","emit","new_err","set","_responseType","accept","auth","user","pass","btoa","username","password","query","attach","file","filename","_getFormData","append","name","_formData","FormData","fn","_callback","clearTimeout","crossDomainError","crossDomain","_timeoutError","timeout","_timeout","_appendQueryString","end","data","_data","onreadystatechange","readyState","timedout","_aborted","handleProgress","direction","total","percent","loaded","hasListeners","onprogress","upload","_timer","setTimeout","abort","open","_withCredentials","withCredentials","_isHost","contentType","_serializer","setRequestHeader","send","head","del","patch","post","put"],"mappings":"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AND","file":"client.js","sourceRoot":"/Users/liangdong06/work/react-tools","sourcesContent":["/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = require('emitter');\nvar requestBase = require('./request-base');\nvar isObject = require('./is-object');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = module.exports = require('./request').bind(null, Request);\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only verison of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    pushEncodedKeyValuePair(pairs, key, obj[key]);\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (val != null) {\n    if (Array.isArray(val)) {\n      val.forEach(function(v) {\n        pushEncodedKeyValuePair(pairs, key, v);\n      });\n    } else if (isObject(val)) {\n      for(var subkey in val) {\n        pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n      }\n    } else {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(val));\n    }\n  } else if (val === null) {\n    pairs.push(encodeURIComponent(key));\n  }\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  return /[\\/+]json\\b/.test(mime);\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */),\n        key = parts.shift(),\n        val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this._setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this._parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype._setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str){\n  var parse = request.parse[this.type];\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype._setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = this.statusCode = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      err.rawResponse = self.xhr && self.xhr.responseText ? self.xhr.responseText : null;\n      // issue #876: return the http status code if the response parsing fails\n      err.statusCode = self.xhr && self.xhr.status ? self.xhr.status : null;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (res.status < 200 || res.status >= 300) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n        new_err.original = err;\n        new_err.response = res;\n        new_err.status = res.status;\n      }\n    } catch(e) {\n      new_err = e; // #985 touching res may cause INVALID_STATE_ERR on old Android\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `requestBase`.\n */\n\nEmitter(Request.prototype);\nfor (var key in requestBase) {\n  Request.prototype[key] = requestBase[key];\n}\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set responseType to `val`. Presently valid responseTypes are 'blob' and\n * 'arraybuffer'.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @param {Object} options with 'type' property 'auto' or 'basic' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (!options) {\n    options = {\n      type: 'basic'\n    }\n  }\n\n  switch (options.type) {\n    case 'basic':\n      var str = btoa(user + ':' + pass);\n      this.set('Authorization', 'Basic ' + str);\n    break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n    break;\n  }\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  this._getFormData().append(field, file, filename || file.name);\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype._timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\n\nRequest.prototype._appendQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self._timeoutError();\n      if (self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(direction, e) {\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = direction;\n    self.emit('progress', e);\n  }\n  if (this.hasListeners('progress')) {\n    try {\n      xhr.onprogress = handleProgress.bind(null, 'download');\n      if (xhr.upload) {\n        xhr.upload.onprogress = handleProgress.bind(null, 'upload');\n      }\n    } catch(e) {\n      // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n      // Reported here:\n      // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n    }\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  this._appendQueryString();\n\n  // initiate request\n  if (this.username && this.password) {\n    xhr.open(this.method, this.url, true, this.username, this.password);\n  } else {\n    xhr.open(this.method, this.url, true);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) serialize = request.serialize['application/json'];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn){\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n"]}