{"version":3,"sources":["node_modules/remarkable/lib/rules.js"],"names":["has","require","unescapeMd","replaceEntities","escapeHtml","rules","blockquote_open","blockquote_close","tokens","idx","getBreak","code","block","content","fence","options","env","instance","token","langClass","langPrefix","langName","fences","fenceName","highlighted","params","split","join","fence_custom","highlight","apply","concat","heading_open","hLevel","heading_close","hr","xhtmlOut","bullet_list_open","bullet_list_close","list_item_open","list_item_close","ordered_list_open","order","ordered_list_close","paragraph_open","tight","paragraph_close","addBreak","type","link_open","title","target","linkTarget","href","link_close","image","src","alt","suffix","table_open","table_close","thead_open","thead_close","tbody_open","tbody_close","tr_open","tr_close","th_open","align","th_close","td_open","td_close","strong_open","strong_close","em_open","em_close","del_open","del_close","ins_open","ins_close","mark_open","mark_close","sub","sup","hardbreak","softbreak","breaks","text","htmlblock","htmltag","abbr_open","abbr_close","footnote_ref","n","Number","id","toString","subId","footnote_block_open","footnote_block_close","footnote_open","footnote_close","footnote_anchor","dl_open","dt_open","dd_open","dl_close","dt_close","dd_close","nextToken","length","module","exports"],"mappings":"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","file":"rules.js","sourceRoot":"/Users/liangdong06/work/react-tools","sourcesContent":["'use strict';\n\n/**\n * Local dependencies\n */\n\nvar has             = require('./common/utils').has;\nvar unescapeMd      = require('./common/utils').unescapeMd;\nvar replaceEntities = require('./common/utils').replaceEntities;\nvar escapeHtml      = require('./common/utils').escapeHtml;\n\n/**\n * Renderer rules cache\n */\n\nvar rules = {};\n\n/**\n * Blockquotes\n */\n\nrules.blockquote_open = function(/* tokens, idx, options, env */) {\n  return '<blockquote>\\n';\n};\n\nrules.blockquote_close = function(tokens, idx /*, options, env */) {\n  return '</blockquote>' + getBreak(tokens, idx);\n};\n\n/**\n * Code\n */\n\nrules.code = function(tokens, idx /*, options, env */) {\n  if (tokens[idx].block) {\n    return '<pre><code>' + escapeHtml(tokens[idx].content) + '</code></pre>' + getBreak(tokens, idx);\n  }\n  return '<code>' + escapeHtml(tokens[idx].content) + '</code>';\n};\n\n/**\n * Fenced code blocks\n */\n\nrules.fence = function(tokens, idx, options, env, instance) {\n  var token = tokens[idx];\n  var langClass = '';\n  var langPrefix = options.langPrefix;\n  var langName = '', fences, fenceName;\n  var highlighted;\n\n  if (token.params) {\n\n    //\n    // ```foo bar\n    //\n    // Try custom renderer \"foo\" first. That will simplify overwrite\n    // for diagrams, latex, and any other fenced block with custom look\n    //\n\n    fences = token.params.split(/\\s+/g);\n    fenceName = fences.join(' ');\n\n    if (has(instance.rules.fence_custom, fences[0])) {\n      return instance.rules.fence_custom[fences[0]](tokens, idx, options, env, instance);\n    }\n\n    langName = escapeHtml(replaceEntities(unescapeMd(fenceName)));\n    langClass = ' class=\"' + langPrefix + langName + '\"';\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight.apply(options.highlight, [ token.content ].concat(fences))\n      || escapeHtml(token.content);\n  } else {\n    highlighted = escapeHtml(token.content);\n  }\n\n  return '<pre><code' + langClass + '>'\n        + highlighted\n        + '</code></pre>'\n        + getBreak(tokens, idx);\n};\n\nrules.fence_custom = {};\n\n/**\n * Headings\n */\n\nrules.heading_open = function(tokens, idx /*, options, env */) {\n  return '<h' + tokens[idx].hLevel + '>';\n};\nrules.heading_close = function(tokens, idx /*, options, env */) {\n  return '</h' + tokens[idx].hLevel + '>\\n';\n};\n\n/**\n * Horizontal rules\n */\n\nrules.hr = function(tokens, idx, options /*, env */) {\n  return (options.xhtmlOut ? '<hr />' : '<hr>') + getBreak(tokens, idx);\n};\n\n/**\n * Bullets\n */\n\nrules.bullet_list_open = function(/* tokens, idx, options, env */) {\n  return '<ul>\\n';\n};\nrules.bullet_list_close = function(tokens, idx /*, options, env */) {\n  return '</ul>' + getBreak(tokens, idx);\n};\n\n/**\n * List items\n */\n\nrules.list_item_open = function(/* tokens, idx, options, env */) {\n  return '<li>';\n};\nrules.list_item_close = function(/* tokens, idx, options, env */) {\n  return '</li>\\n';\n};\n\n/**\n * Ordered list items\n */\n\nrules.ordered_list_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  var order = token.order > 1 ? ' start=\"' + token.order + '\"' : '';\n  return '<ol' + order + '>\\n';\n};\nrules.ordered_list_close = function(tokens, idx /*, options, env */) {\n  return '</ol>' + getBreak(tokens, idx);\n};\n\n/**\n * Paragraphs\n */\n\nrules.paragraph_open = function(tokens, idx /*, options, env */) {\n  return tokens[idx].tight ? '' : '<p>';\n};\nrules.paragraph_close = function(tokens, idx /*, options, env */) {\n  var addBreak = !(tokens[idx].tight && idx && tokens[idx - 1].type === 'inline' && !tokens[idx - 1].content);\n  return (tokens[idx].tight ? '' : '</p>') + (addBreak ? getBreak(tokens, idx) : '');\n};\n\n/**\n * Links\n */\n\nrules.link_open = function(tokens, idx, options /* env */) {\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var target = options.linkTarget ? (' target=\"' + options.linkTarget + '\"') : '';\n  return '<a href=\"' + escapeHtml(tokens[idx].href) + '\"' + title + target + '>';\n};\nrules.link_close = function(/* tokens, idx, options, env */) {\n  return '</a>';\n};\n\n/**\n * Images\n */\n\nrules.image = function(tokens, idx, options /*, env */) {\n  var src = ' src=\"' + escapeHtml(tokens[idx].src) + '\"';\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var alt = ' alt=\"' + (tokens[idx].alt ? escapeHtml(replaceEntities(unescapeMd(tokens[idx].alt))) : '') + '\"';\n  var suffix = options.xhtmlOut ? ' /' : '';\n  return '<img' + src + alt + title + suffix + '>';\n};\n\n/**\n * Tables\n */\n\nrules.table_open = function(/* tokens, idx, options, env */) {\n  return '<table>\\n';\n};\nrules.table_close = function(/* tokens, idx, options, env */) {\n  return '</table>\\n';\n};\nrules.thead_open = function(/* tokens, idx, options, env */) {\n  return '<thead>\\n';\n};\nrules.thead_close = function(/* tokens, idx, options, env */) {\n  return '</thead>\\n';\n};\nrules.tbody_open = function(/* tokens, idx, options, env */) {\n  return '<tbody>\\n';\n};\nrules.tbody_close = function(/* tokens, idx, options, env */) {\n  return '</tbody>\\n';\n};\nrules.tr_open = function(/* tokens, idx, options, env */) {\n  return '<tr>';\n};\nrules.tr_close = function(/* tokens, idx, options, env */) {\n  return '</tr>\\n';\n};\nrules.th_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<th'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.th_close = function(/* tokens, idx, options, env */) {\n  return '</th>';\n};\nrules.td_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<td'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.td_close = function(/* tokens, idx, options, env */) {\n  return '</td>';\n};\n\n/**\n * Bold\n */\n\nrules.strong_open = function(/* tokens, idx, options, env */) {\n  return '<strong>';\n};\nrules.strong_close = function(/* tokens, idx, options, env */) {\n  return '</strong>';\n};\n\n/**\n * Italicize\n */\n\nrules.em_open = function(/* tokens, idx, options, env */) {\n  return '<em>';\n};\nrules.em_close = function(/* tokens, idx, options, env */) {\n  return '</em>';\n};\n\n/**\n * Strikethrough\n */\n\nrules.del_open = function(/* tokens, idx, options, env */) {\n  return '<del>';\n};\nrules.del_close = function(/* tokens, idx, options, env */) {\n  return '</del>';\n};\n\n/**\n * Insert\n */\n\nrules.ins_open = function(/* tokens, idx, options, env */) {\n  return '<ins>';\n};\nrules.ins_close = function(/* tokens, idx, options, env */) {\n  return '</ins>';\n};\n\n/**\n * Highlight\n */\n\nrules.mark_open = function(/* tokens, idx, options, env */) {\n  return '<mark>';\n};\nrules.mark_close = function(/* tokens, idx, options, env */) {\n  return '</mark>';\n};\n\n/**\n * Super- and sub-script\n */\n\nrules.sub = function(tokens, idx /*, options, env */) {\n  return '<sub>' + escapeHtml(tokens[idx].content) + '</sub>';\n};\nrules.sup = function(tokens, idx /*, options, env */) {\n  return '<sup>' + escapeHtml(tokens[idx].content) + '</sup>';\n};\n\n/**\n * Breaks\n */\n\nrules.hardbreak = function(tokens, idx, options /*, env */) {\n  return options.xhtmlOut ? '<br />\\n' : '<br>\\n';\n};\nrules.softbreak = function(tokens, idx, options /*, env */) {\n  return options.breaks ? (options.xhtmlOut ? '<br />\\n' : '<br>\\n') : '\\n';\n};\n\n/**\n * Text\n */\n\nrules.text = function(tokens, idx /*, options, env */) {\n  return escapeHtml(tokens[idx].content);\n};\n\n/**\n * Content\n */\n\nrules.htmlblock = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\nrules.htmltag = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\n\n/**\n * Abbreviations, initialism\n */\n\nrules.abbr_open = function(tokens, idx /*, options, env */) {\n  return '<abbr title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\">';\n};\nrules.abbr_close = function(/* tokens, idx, options, env */) {\n  return '</abbr>';\n};\n\n/**\n * Footnotes\n */\n\nrules.footnote_ref = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return '<sup class=\"footnote-ref\"><a href=\"#fn' + n + '\" id=\"' + id + '\">[' + n + ']</a></sup>';\n};\nrules.footnote_block_open = function(tokens, idx, options) {\n  var hr = options.xhtmlOut\n    ? '<hr class=\"footnotes-sep\" />\\n'\n    : '<hr class=\"footnotes-sep\">\\n';\n  return hr + '<section class=\"footnotes\">\\n<ol class=\"footnotes-list\">\\n';\n};\nrules.footnote_block_close = function() {\n  return '</ol>\\n</section>\\n';\n};\nrules.footnote_open = function(tokens, idx) {\n  var id = Number(tokens[idx].id + 1).toString();\n  return '<li id=\"fn' + id + '\"  class=\"footnote-item\">';\n};\nrules.footnote_close = function() {\n  return '</li>\\n';\n};\nrules.footnote_anchor = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return ' <a href=\"#' + id + '\" class=\"footnote-backref\">↩</a>';\n};\n\n/**\n * Definition lists\n */\n\nrules.dl_open = function() {\n  return '<dl>\\n';\n};\nrules.dt_open = function() {\n  return '<dt>';\n};\nrules.dd_open = function() {\n  return '<dd>';\n};\nrules.dl_close = function() {\n  return '</dl>\\n';\n};\nrules.dt_close = function() {\n  return '</dt>\\n';\n};\nrules.dd_close = function() {\n  return '</dd>\\n';\n};\n\n/**\n * Helper functions\n */\n\nfunction nextToken(tokens, idx) {\n  if (++idx >= tokens.length - 2) {\n    return idx;\n  }\n  if ((tokens[idx].type === 'paragraph_open' && tokens[idx].tight) &&\n      (tokens[idx + 1].type === 'inline' && tokens[idx + 1].content.length === 0) &&\n      (tokens[idx + 2].type === 'paragraph_close' && tokens[idx + 2].tight)) {\n    return nextToken(tokens, idx + 2);\n  }\n  return idx;\n}\n\n/**\n * Check to see if `\\n` is needed before the next token.\n *\n * @param  {Array} `tokens`\n * @param  {Number} `idx`\n * @return {String} Empty string or newline\n * @api private\n */\n\nvar getBreak = rules.getBreak = function getBreak(tokens, idx) {\n  idx = nextToken(tokens, idx);\n  if (idx < tokens.length && tokens[idx].type === 'list_item_close') {\n    return '';\n  }\n  return '\\n';\n};\n\n/**\n * Expose `rules`\n */\n\nmodule.exports = rules;\n"]}