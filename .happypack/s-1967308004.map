{"version":3,"sources":["node_modules/babel-polyfill/node_modules/core-js/modules/es7.observable.js"],"names":["$export","require","global","core","microtask","OBSERVABLE","aFunction","anObject","anInstance","redefineAll","hide","forOf","RETURN","getMethod","fn","undefined","cleanupSubscription","subscription","cleanup","_c","subscriptionClosed","_o","closeSubscription","Subscription","observer","subscriber","SubscriptionObserver","unsubscribe","e","error","prototype","_s","next","value","m","call","complete","$Observable","Observable","_f","subscribe","forEach","that","Promise","resolve","reject","from","x","C","method","observable","constructor","done","it","of","i","l","arguments","length","items","Array","G"],"mappings":"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","file":"es7.observable.js","sourceRoot":"/Users/liangdong06/work/react-tools","sourcesContent":["'use strict';\n// https://github.com/zenparsing/es-observable\nvar $export     = require('./_export')\n  , global      = require('./_global')\n  , core        = require('./_core')\n  , microtask   = require('./_microtask')()\n  , OBSERVABLE  = require('./_wks')('observable')\n  , aFunction   = require('./_a-function')\n  , anObject    = require('./_an-object')\n  , anInstance  = require('./_an-instance')\n  , redefineAll = require('./_redefine-all')\n  , hide        = require('./_hide')\n  , forOf       = require('./_for-of')\n  , RETURN      = forOf.RETURN;\n\nvar getMethod = function(fn){\n  return fn == null ? undefined : aFunction(fn);\n};\n\nvar cleanupSubscription = function(subscription){\n  var cleanup = subscription._c;\n  if(cleanup){\n    subscription._c = undefined;\n    cleanup();\n  }\n};\n\nvar subscriptionClosed = function(subscription){\n  return subscription._o === undefined;\n};\n\nvar closeSubscription = function(subscription){\n  if(!subscriptionClosed(subscription)){\n    subscription._o = undefined;\n    cleanupSubscription(subscription);\n  }\n};\n\nvar Subscription = function(observer, subscriber){\n  anObject(observer);\n  this._c = undefined;\n  this._o = observer;\n  observer = new SubscriptionObserver(this);\n  try {\n    var cleanup      = subscriber(observer)\n      , subscription = cleanup;\n    if(cleanup != null){\n      if(typeof cleanup.unsubscribe === 'function')cleanup = function(){ subscription.unsubscribe(); };\n      else aFunction(cleanup);\n      this._c = cleanup;\n    }\n  } catch(e){\n    observer.error(e);\n    return;\n  } if(subscriptionClosed(this))cleanupSubscription(this);\n};\n\nSubscription.prototype = redefineAll({}, {\n  unsubscribe: function unsubscribe(){ closeSubscription(this); }\n});\n\nvar SubscriptionObserver = function(subscription){\n  this._s = subscription;\n};\n\nSubscriptionObserver.prototype = redefineAll({}, {\n  next: function next(value){\n    var subscription = this._s;\n    if(!subscriptionClosed(subscription)){\n      var observer = subscription._o;\n      try {\n        var m = getMethod(observer.next);\n        if(m)return m.call(observer, value);\n      } catch(e){\n        try {\n          closeSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      }\n    }\n  },\n  error: function error(value){\n    var subscription = this._s;\n    if(subscriptionClosed(subscription))throw value;\n    var observer = subscription._o;\n    subscription._o = undefined;\n    try {\n      var m = getMethod(observer.error);\n      if(!m)throw value;\n      value = m.call(observer, value);\n    } catch(e){\n      try {\n        cleanupSubscription(subscription);\n      } finally {\n        throw e;\n      }\n    } cleanupSubscription(subscription);\n    return value;\n  },\n  complete: function complete(value){\n    var subscription = this._s;\n    if(!subscriptionClosed(subscription)){\n      var observer = subscription._o;\n      subscription._o = undefined;\n      try {\n        var m = getMethod(observer.complete);\n        value = m ? m.call(observer, value) : undefined;\n      } catch(e){\n        try {\n          cleanupSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      } cleanupSubscription(subscription);\n      return value;\n    }\n  }\n});\n\nvar $Observable = function Observable(subscriber){\n  anInstance(this, $Observable, 'Observable', '_f')._f = aFunction(subscriber);\n};\n\nredefineAll($Observable.prototype, {\n  subscribe: function subscribe(observer){\n    return new Subscription(observer, this._f);\n  },\n  forEach: function forEach(fn){\n    var that = this;\n    return new (core.Promise || global.Promise)(function(resolve, reject){\n      aFunction(fn);\n      var subscription = that.subscribe({\n        next : function(value){\n          try {\n            return fn(value);\n          } catch(e){\n            reject(e);\n            subscription.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n    });\n  }\n});\n\nredefineAll($Observable, {\n  from: function from(x){\n    var C = typeof this === 'function' ? this : $Observable;\n    var method = getMethod(anObject(x)[OBSERVABLE]);\n    if(method){\n      var observable = anObject(method.call(x));\n      return observable.constructor === C ? observable : new C(function(observer){\n        return observable.subscribe(observer);\n      });\n    }\n    return new C(function(observer){\n      var done = false;\n      microtask(function(){\n        if(!done){\n          try {\n            if(forOf(x, false, function(it){\n              observer.next(it);\n              if(done)return RETURN;\n            }) === RETURN)return;\n          } catch(e){\n            if(done)throw e;\n            observer.error(e);\n            return;\n          } observer.complete();\n        }\n      });\n      return function(){ done = true; };\n    });\n  },\n  of: function of(){\n    for(var i = 0, l = arguments.length, items = Array(l); i < l;)items[i] = arguments[i++];\n    return new (typeof this === 'function' ? this : $Observable)(function(observer){\n      var done = false;\n      microtask(function(){\n        if(!done){\n          for(var i = 0; i < items.length; ++i){\n            observer.next(items[i]);\n            if(done)return;\n          } observer.complete();\n        }\n      });\n      return function(){ done = true; };\n    });\n  }\n});\n\nhide($Observable.prototype, OBSERVABLE, function(){ return this; });\n\n$export($export.G, {Observable: $Observable});\n\nrequire('./_set-species')('Observable');"]}